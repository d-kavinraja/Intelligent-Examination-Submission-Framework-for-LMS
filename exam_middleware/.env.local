# ===========================================
# Examination Middleware - LOCAL DEPLOYMENT
# Saveetha College Edition
# ===========================================

# Application Settings
APP_NAME="Exam Submission Middleware"
APP_VERSION="1.0.0"
DEBUG=true
SECRET_KEY="change-me-with-a-secure-random-string-at-least-32-chars-long"
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# Server Configuration (localhost for development)
HOST=127.0.0.1
PORT=8000
RELOAD=true

# ===========================================
# PostgreSQL Database Configuration (Local)
# ===========================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=exam_middleware

# If you prefer to specific DATABASE_URL:
# DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/exam_middleware

# ===========================================
# Redis Configuration (For Session Management)
# ===========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ===========================================
# Moodle LMS Configuration
# College Moodle Instance: lms.ai.saveetha.in
# ===========================================
MOODLE_BASE_URL=https://lms.ai.saveetha.in
MOODLE_WS_ENDPOINT=/webservice/rest/server.php
MOODLE_UPLOAD_ENDPOINT=/webservice/upload.php
MOODLE_TOKEN_ENDPOINT=/login/token.php
MOODLE_SERVICE=moodle_mobile_app

# OPTIONAL: Admin token for administrative operations
# Leave empty for local development - students use their own tokens for submissions
# Only needed if you want to:
# - Automatically look up student emails from Moodle
# - Retry failed submissions from admin panel
MOODLE_ADMIN_TOKEN=

# ===========================================
# ML Service Configuration
# LOCAL MODE: Uses YOLO + CRNN models on this machine
# ===========================================

# Leave empty for LOCAL extraction using bundled models
HF_SPACE_URL=

# Local Streamlit UI (optional - for testing extraction manually)
ML_SERVICE_URL=http://localhost:8501
ML_SERVICE_ENABLED=false

# ===========================================
# File Storage Configuration
# ===========================================
UPLOAD_DIR=./uploads
MAX_FILE_SIZE_MB=50
ALLOWED_EXTENSIONS=.pdf,.jpg,.jpeg,.png

# ===========================================
# Logging Configuration
# ===========================================
LOG_LEVEL=INFO
LOG_FILE=./logs/app.log

# ===========================================
# Email Notifications (Optional)
# Emails are useful but NOT required for basic functionality
# ===========================================

# Option 1: SendGrid (cloud-friendly, recommended)
# Sign up free at: https://signup.sendgrid.com/
SENDGRID_API_KEY=

# Option 2: SMTP (local email server, works with Gmail/Outlook)
SMTP_ENABLED=false
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_USE_TLS=true
# Common SMTP servers:
# Gmail: smtp.gmail.com:587 (TLS=true)
# Outlook: smtp-mail.outlook.com:587 (TLS=true)
# Office365: smtp.office365.com:587 (TLS=true)

EMAIL_FROM_NAME="Examination Middleware"
EMAIL_FROM_EMAIL=noreply@saveetha.edu.in

# ===========================================
# CORS Configuration (for frontend access)
# ===========================================
CORS_ORIGINS='["http://localhost:3000","http://localhost:8000"]'
